# Notra Website é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ æ ¹ç›®å½•æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- **`package.json`** - Node.js é¡¹ç›®é…ç½®ï¼Œå®šä¹‰ä¾èµ–å’Œè„šæœ¬
- **`tsconfig.json`** - TypeScript ç¼–è¯‘é…ç½®
- **`next.config.ts`** - Next.js æ¡†æ¶é…ç½®
- **`postcss.config.mjs`** - PostCSS é…ç½®ï¼ˆç”¨äº Tailwind CSSï¼‰
- **`eslint.config.mjs`** - ESLint ä»£ç æ£€æŸ¥é…ç½®
- **`.env.local`** - ç¯å¢ƒå˜é‡ï¼ˆAPI å¯†é’¥ç­‰ï¼Œä¸æäº¤åˆ° Gitï¼‰

### æ–‡æ¡£æ–‡ä»¶
- **`README.md`** - é¡¹ç›®è¯´æ˜æ–‡æ¡£
- **`æ£€æŸ¥æ­¥éª¤.md`** - åŠŸèƒ½æ£€æŸ¥æ­¥éª¤æŒ‡å—
- **`test-api.md`** - API æµ‹è¯•æŒ‡å—
- **`API_KEYS_QUICK_SETUP.md`** - API å¯†é’¥å¿«é€Ÿè®¾ç½®æŒ‡å—
- **`VERCEL_API_KEYS_SETUP.md`** - Vercel éƒ¨ç½²æ—¶çš„ API å¯†é’¥è®¾ç½®
- **`VIDEO_API_COST_ANALYSIS.md`** - è§†é¢‘ API æˆæœ¬åˆ†æ
- **`VIDEO_API_IMPLEMENTATION_PLAN.md`** - è§†é¢‘ API å®ç°è®¡åˆ’
- **`BILIBILI_API_OPTIONS.md`** - Bilibili API é€‰é¡¹è¯´æ˜
- **`DEPLOYMENT_CHECKLIST.md`** - éƒ¨ç½²æ£€æŸ¥æ¸…å•
- **å„ç§ `CLAUDE_*.md` å’Œ `GEMINI_*.md`** - å¼€å‘æç¤ºè¯æ–‡æ¡£

---

## ğŸ“ app/ - Next.js åº”ç”¨ç›®å½•ï¼ˆä¸»è¦ä»£ç ï¼‰

### é¡µé¢æ–‡ä»¶ï¼ˆPagesï¼‰

#### ä¸»é¡µé¢
- **`app/page.tsx`** - é¦–é¡µï¼ˆLanding Pageï¼‰ï¼ŒåŒ…å« Hero åŒºåŸŸå’ŒåŠŸèƒ½ä»‹ç»
- **`app/layout.tsx`** - å…¨å±€å¸ƒå±€ï¼Œå®šä¹‰ HTML ç»“æ„å’Œå…¨å±€æ ·å¼
- **`app/globals.css`** - å…¨å±€ CSS æ ·å¼

#### ç”¨æˆ·ç›¸å…³é¡µé¢
- **`app/login/page.tsx`** - ç™»å½•é¡µé¢
- **`app/signup/page.tsx`** - æ³¨å†Œé¡µé¢
- **`app/settings/page.tsx`** - ç”¨æˆ·è®¾ç½®é¡µé¢
- **`app/pricing/page.tsx`** - å®šä»·é¡µé¢

#### æ ¸å¿ƒåŠŸèƒ½é¡µé¢
- **`app/dashboard/page.tsx`** - Dashboard ä¸»é¡µé¢ï¼Œæ˜¾ç¤ºæ‰€æœ‰å­¦ä¹ ä¼šè¯å’Œä¸Šä¼ å…¥å£
- **`app/dashboard/[id]/page.tsx`** - å•ä¸ªå­¦ä¹ ä¼šè¯è¯¦æƒ…é¡µï¼Œæ˜¾ç¤º notes/quizzes/flashcards
- **`app/chat/page.tsx`** - Notra AI èŠå¤©ä¸»é¡µé¢ï¼ˆGeneral Chatï¼‰
- **`app/chat/note/page.tsx`** - "Chat with this Note" é¡µé¢ï¼ˆåŸºäºç‰¹å®šå­¦ä¹ èµ„äº§çš„èŠå¤©ï¼‰
- **`app/chat/chat-ui.tsx`** - èŠå¤© UI ç»„ä»¶

#### ä¸Šä¼ é¡µé¢
- **`app/upload/file/page.tsx`** - æ–‡ä»¶ä¸Šä¼ é¡µé¢
- **`app/upload/audio/page.tsx`** - éŸ³é¢‘ä¸Šä¼ é¡µé¢
- **`app/upload/video/page.tsx`** - è§†é¢‘ä¸Šä¼ é¡µé¢

#### å¼•å¯¼æµç¨‹ï¼ˆOnboardingï¼‰
- **`app/onboarding/step1/page.tsx`** - æ­¥éª¤1ï¼šé€‰æ‹©èº«ä»½ï¼ˆå­¦ç”Ÿ/ä¸“ä¸šäººå£«ç­‰ï¼‰
- **`app/onboarding/step2/page.tsx`** - æ­¥éª¤2ï¼šæ‹–æ‹½ç¤ºä¾‹æ–‡ä»¶ï¼Œå±•ç¤ºåŠŸèƒ½
- **`app/onboarding/step2-country/page.tsx`** - æ­¥éª¤2ï¼šé€‰æ‹©å›½å®¶
- **`app/onboarding/step2-location/page.tsx`** - æ­¥éª¤2ï¼šé€‰æ‹©ä½ç½®
- **`app/onboarding/step4/page.tsx`** - æ­¥éª¤4ï¼šæŸ¥çœ‹ç”Ÿæˆçš„ç¬”è®°
- **`app/onboarding/step5/page.tsx`** - æ­¥éª¤5ï¼šæµ‹è¯•æµ‹éªŒé¢˜
- **`app/onboarding/step6/page.tsx`** - æ­¥éª¤6ï¼šæŸ¥çœ‹é—ªå¡
- **`app/onboarding/step7/page.tsx`** - æ­¥éª¤7ï¼šå®Œæˆå¼•å¯¼
- **`app/onboarding/config.ts`** - å¼•å¯¼æµç¨‹é…ç½®
- **`app/onboarding/sampleConfig.ts`** - ç¤ºä¾‹æ•°æ®é…ç½®

#### æµ‹è¯•é¡µé¢
- **`app/test-language/page.tsx`** - è¯­è¨€æµ‹è¯•é¡µé¢
- **`app/app/page.tsx`** - åº”ç”¨æµ‹è¯•é¡µé¢

---

### API è·¯ç”±ï¼ˆBackendï¼‰

#### è®¤è¯ API
- **`app/api/auth/login/route.ts`** - ç”¨æˆ·ç™»å½• API
- **`app/api/auth/register/route.ts`** - ç”¨æˆ·æ³¨å†Œ API
- **`app/api/auth/logout/route.ts`** - ç”¨æˆ·ç™»å‡º API

#### æ ¸å¿ƒå¤„ç† APIï¼ˆé‡è¦ï¼ï¼‰
- **`app/api/process/file/route.ts`** - æ–‡ä»¶å¤„ç† APIï¼šä¸Šä¼ æ–‡ä»¶ â†’ æå–æ–‡æœ¬ â†’ ç”Ÿæˆå­¦ä¹ èµ„äº§
- **`app/api/process/audio/route.ts`** - éŸ³é¢‘å¤„ç† APIï¼šä¸Šä¼ éŸ³é¢‘ â†’ è½¬å½• â†’ ç”Ÿæˆå­¦ä¹ èµ„äº§
- **`app/api/process/video/route.ts`** - è§†é¢‘å¤„ç† APIï¼šè¾“å…¥è§†é¢‘é“¾æ¥ â†’ è·å–å­—å¹• â†’ ç”Ÿæˆå­¦ä¹ èµ„äº§
- **`app/api/process-file/route.ts`** - æ—§ç‰ˆæ–‡ä»¶å¤„ç† APIï¼ˆå·²åºŸå¼ƒï¼Œä¿ç•™ç”¨äºå…¼å®¹ï¼‰

#### èŠå¤© API
- **`app/api/chat/route.ts`** - AI èŠå¤© APIï¼Œæ”¯æŒ General Chat å’Œ Chat with Note ä¸¤ç§æ¨¡å¼

#### ä¼šè¯ç®¡ç† API
- **`app/api/session/[id]/route.ts`** - è·å–å•ä¸ªå­¦ä¹ ä¼šè¯è¯¦æƒ…
- **`app/api/sessions/recent/route.ts`** - è·å–æœ€è¿‘çš„å­¦ä¹ ä¼šè¯åˆ—è¡¨

#### å…¶ä»– API
- **`app/api/transcribe/route.ts`** - éŸ³é¢‘è½¬å½• APIï¼ˆç‹¬ç«‹ä½¿ç”¨ï¼‰
- **`app/api/usage/route.ts`** - è·å–ç”¨æˆ·ä½¿ç”¨ç»Ÿè®¡ API

---

## ğŸ“ lib/ - å·¥å…·å‡½æ•°åº“

### æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- **`lib/learning-asset-generator.ts`** - **æ ¸å¿ƒå‡½æ•°**ï¼šç»Ÿä¸€çš„å­¦ä¹ èµ„äº§ç”Ÿæˆå™¨ï¼Œä¸€æ¬¡ LLM è°ƒç”¨ç”Ÿæˆ notes/quizzes/flashcards/summary
- **`lib/db.ts`** - æ•°æ®åº“æ“ä½œï¼šåˆ›å»ºã€æŸ¥è¯¢ã€ä¿å­˜å­¦ä¹ ä¼šè¯ï¼ˆä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼‰
- **`lib/chat-utils.ts`** - èŠå¤©å·¥å…·å‡½æ•°ï¼šæ¶ˆæ¯ä¿®å‰ªã€ç›¸å…³ç« èŠ‚ç­›é€‰ç­‰

### ç”¨æˆ·å’Œæƒé™
- **`lib/userPlan.ts`** - ç”¨æˆ·è®¡åˆ’åˆ¤æ–­ï¼ˆå…è´¹/Proï¼‰
- **`lib/usage.ts`** - ä½¿ç”¨é‡ç»Ÿè®¡å’Œé™åˆ¶æ£€æŸ¥

### è§†é¢‘å¤„ç†
- **`lib/videoPlatforms.ts`** - è§†é¢‘å¹³å°æ£€æµ‹å’Œ ID æå–ï¼ˆYouTube/Bilibili/Douyinï¼‰
- **`lib/videoTranscripts/index.ts`** - è§†é¢‘å­—å¹•è·å–çš„ç»Ÿä¸€å…¥å£
- **`lib/videoTranscripts/youtube.ts`** - YouTube è§†é¢‘å­—å¹•è·å–
- **`lib/videoTranscripts/bilibili.ts`** - Bilibili è§†é¢‘å­—å¹•è·å–

### å›½é™…åŒ–ï¼ˆi18nï¼‰
- **`lib/i18n.ts`** - å›½é™…åŒ–ä¸»æ–‡ä»¶ï¼Œæä¾›ç¿»è¯‘å‡½æ•°
- **`lib/i18n-debug.ts`** - å›½é™…åŒ–è°ƒè¯•å·¥å…·
- **`lib/languageDetection.ts`** - è¯­è¨€æ£€æµ‹
- **`lib/educationMode.ts`** - æ•™è‚²æ¨¡å¼ç›¸å…³

### å…¶ä»–
- **`lib/supabase.ts`** - Supabase æ•°æ®åº“å®¢æˆ·ç«¯ï¼ˆå¦‚æœä½¿ç”¨ï¼‰

---

## ğŸ“ components/ - React ç»„ä»¶

### é€šç”¨ç»„ä»¶
- **`components/NotraLogo.tsx`** - Notra Logo ç»„ä»¶
- **`components/WelcomeUser.tsx`** - æ¬¢è¿ç”¨æˆ·ç»„ä»¶
- **`components/MagicBackground.tsx`** - é­”æ³•èƒŒæ™¯åŠ¨ç”»ç»„ä»¶

### è¯­è¨€å’Œåœ°åŒº
- **`components/LanguageSwitcher.tsx`** - è¯­è¨€åˆ‡æ¢å™¨ç»„ä»¶
- **`components/LanguageProvider.tsx`** - è¯­è¨€ä¸Šä¸‹æ–‡æä¾›è€…
- **`components/CountrySwitcher.tsx`** - å›½å®¶åˆ‡æ¢å™¨ç»„ä»¶

### å¼•å¯¼æµç¨‹å›¾ç‰‡ç»„ä»¶
- **`components/onboarding-images/`** - å„ç§å¼•å¯¼æµç¨‹ä¸­ä½¿ç”¨çš„ SVG å›¾ç‰‡ç»„ä»¶
  - `AlgebraHeroImage.tsx` - ä»£æ•°è‹±é›„å›¾ç‰‡
  - `CalculusHeroImage.tsx` - å¾®ç§¯åˆ†è‹±é›„å›¾ç‰‡
  - `LinearAlgebraHeroImage.tsx` - çº¿æ€§ä»£æ•°è‹±é›„å›¾ç‰‡
  - `GradientHeroImage.tsx` - æ¢¯åº¦è‹±é›„å›¾ç‰‡
  - `SalesDashboardHero.tsx` - é”€å”®ä»ªè¡¨æ¿è‹±é›„å›¾ç‰‡
  - `ActiveLearningHero.tsx` - ä¸»åŠ¨å­¦ä¹ è‹±é›„å›¾ç‰‡
  - ä»¥åŠå„ç§æ¦‚å¿µå›¾è¡¨ç»„ä»¶

---

## ğŸ“ config/ - é…ç½®æ–‡ä»¶

- **`config/models.ts`** - AI æ¨¡å‹é…ç½®ï¼ˆGPT-4o-mini, GPT-4o, GPT-5.1 ç­‰ï¼‰
- **`config/usageLimits.ts`** - ä½¿ç”¨é™åˆ¶é…ç½®ï¼ˆå…è´¹/Pro è®¡åˆ’çš„ä¸åŒé™åˆ¶ï¼‰

---

## ğŸ“ types/ - TypeScript ç±»å‹å®šä¹‰

- **`types/notra.ts`** - **æ ¸å¿ƒç±»å‹å®šä¹‰**ï¼šNotraSession, NoteSection, QuizItem, Flashcard ç­‰
- **`types/react-katex.d.ts`** - react-katex åº“çš„ç±»å‹å®šä¹‰

---

## ğŸ“ constants/ - å¸¸é‡å®šä¹‰

- **`constants/countries.ts`** - å›½å®¶åˆ—è¡¨å¸¸é‡
- **`constants/languages.ts`** - è¯­è¨€åˆ—è¡¨å¸¸é‡

---

## ğŸ“ locales/ - å›½é™…åŒ–ç¿»è¯‘æ–‡ä»¶

åŒ…å« 20+ ç§è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶ï¼š
- `locales/en/common.json` - è‹±è¯­
- `locales/zh-CN/common.json` - ç®€ä½“ä¸­æ–‡
- `locales/zh-TW/common.json` - ç¹ä½“ä¸­æ–‡
- `locales/ja/common.json` - æ—¥è¯­
- `locales/ko/common.json` - éŸ©è¯­
- ä»¥åŠå…¶ä»–è¯­è¨€...

---

## ğŸ“ sample-data/ - ç¤ºä¾‹æ•°æ®

- **`sample-data/onboardingSamples.ts`** - å¼•å¯¼æµç¨‹ä¸­ä½¿ç”¨çš„ç¤ºä¾‹å­¦ä¹ æ•°æ®ï¼ˆä¸è°ƒç”¨ APIï¼Œä½¿ç”¨å†™æ­»çš„æ•°æ®ï¼‰

---

## ğŸ“ public/ - é™æ€èµ„æº

- **`public/flags/`** - å›½æ——å›¾æ ‡ï¼ˆä¸­å›½ã€é¦™æ¸¯ã€æ¾³é—¨ã€å°æ¹¾ï¼‰
- **`public/file.svg`** - æ–‡ä»¶å›¾æ ‡
- **`public/globe.svg`** - åœ°çƒå›¾æ ‡
- å…¶ä»– SVG å›¾æ ‡

---

## ğŸ“ docs/ - æ–‡æ¡£

- **`docs/LANGUAGE_IMPLEMENTATION_STRATEGY.md`** - è¯­è¨€å®ç°ç­–ç•¥æ–‡æ¡£

---

## ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### æœ€é‡è¦çš„æ–‡ä»¶ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰

#### 1. å­¦ä¹ èµ„äº§ç”Ÿæˆï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- `lib/learning-asset-generator.ts` - ç»Ÿä¸€ç”Ÿæˆå™¨ï¼Œä¸€æ¬¡è°ƒç”¨ç”Ÿæˆæ‰€æœ‰å†…å®¹
- `app/api/process/file/route.ts` - æ–‡ä»¶å¤„ç†å…¥å£
- `app/api/process/audio/route.ts` - éŸ³é¢‘å¤„ç†å…¥å£
- `app/api/process/video/route.ts` - è§†é¢‘å¤„ç†å…¥å£

#### 2. èŠå¤©åŠŸèƒ½
- `app/api/chat/route.ts` - èŠå¤© APIï¼Œæ”¯æŒä¸¤ç§æ¨¡å¼
- `app/chat/page.tsx` - èŠå¤©é¡µé¢
- `lib/chat-utils.ts` - èŠå¤©å·¥å…·å‡½æ•°

#### 3. æ•°æ®å­˜å‚¨
- `lib/db.ts` - æ•°æ®åº“æ“ä½œï¼ˆæ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼‰
- `types/notra.ts` - æ•°æ®æ¨¡å‹å®šä¹‰

#### 4. å‰ç«¯é¡µé¢
- `app/dashboard/page.tsx` - Dashboard ä¸»é¡µé¢
- `app/dashboard/[id]/page.tsx` - ä¼šè¯è¯¦æƒ…é¡µ

---

## ğŸ“Š æ•°æ®æµ

### æ–‡ä»¶ä¸Šä¼ æµç¨‹
1. ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ â†’ `app/dashboard/page.tsx` (å‰ç«¯)
2. è°ƒç”¨ â†’ `app/api/process/file/route.ts` (API)
3. æå–æ–‡æœ¬ â†’ `extractTextFromFile()` (åœ¨ route.ts ä¸­)
4. ç”Ÿæˆå­¦ä¹ èµ„äº§ â†’ `lib/learning-asset-generator.ts`
5. ä¿å­˜åˆ°æ•°æ®åº“ â†’ `lib/db.ts`
6. è¿”å› sessionId â†’ å‰ç«¯è·³è½¬åˆ°è¯¦æƒ…é¡µ

### èŠå¤©æµç¨‹
1. ç”¨æˆ·å‘é€æ¶ˆæ¯ â†’ `app/chat/page.tsx` (å‰ç«¯)
2. è°ƒç”¨ â†’ `app/api/chat/route.ts` (API)
3. å¦‚æœæ˜¯ "Chat with Note" æ¨¡å¼ â†’ è·å–ä¼šè¯æ•°æ® â†’ `app/api/session/[id]/route.ts`
4. è°ƒç”¨ OpenAI API â†’ ç”Ÿæˆå›å¤
5. æµå¼è¿”å› â†’ å‰ç«¯å®æ—¶æ˜¾ç¤º

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **`app/api/process-file/route.ts`** - è¿™æ˜¯æ—§ç‰ˆ APIï¼Œå·²åºŸå¼ƒï¼Œæ–°ä»£ç ä½¿ç”¨ `app/api/process/file/route.ts`
2. **`lib/db.ts`** - ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼Œç”Ÿäº§ç¯å¢ƒåº”æ›¿æ¢ä¸ºçœŸå®æ•°æ®åº“
3. **`lib/userPlan.ts`** - ç›®å‰ç¡¬ç¼–ç ä¸º "free"ï¼Œéœ€è¦é›†æˆçœŸå®çš„ç”¨æˆ·ç³»ç»Ÿ
4. **`.env.local`** - å¿…é¡»é…ç½® `OPENAI_API_KEY` æ‰èƒ½ä½¿ç”¨ AI åŠŸèƒ½

